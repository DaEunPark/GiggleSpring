<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.giggler.giggle.List">


	<!-- 메인 목록 가져오기 -->
	<select id="AllFeedList"  resultType="com.giggler.giggle.dto.ListDTO">
		<![CDATA[
			SELECT		p.post_no, u.user_no, u.user_nick, u.profile_image, p.text_content, p.post_date, p.like_cnt , p.comment_cnt ,p.post_link
			FROM 		giggledbaws.user u
			INNER JOIN  giggledbaws.post p  
			ON 			p.user_no = u.user_no
			ORDER BY	p.post_no desc;
		]]>
	</select>
	
	
	<!-- 검색 목록 가져오기 -->
	<select id="selectsearchfeedList" parameterType="com.giggler.giggle.dto.ListDTO" resultType="com.giggler.giggle.dto.ListDTO">
		<![CDATA[
			SELECT 		p.post_no, u.user_no, u.user_nick, u.profile_image, p.text_content, p.post_date, p.like_cnt , p.comment_cnt ,p.post_link
			FROM 		giggledbaws.post p
			LEFT JOIN   giggledbaws.user u      
			ON 			u.user_no = p.user_no
			WHERE       p.post_no  > 0 
			AND         u.user_nick LIKE CONCAT('%' , #{keyword} , '%') 
			OR 			p.text_content LIKE CONCAT('%' ,#{keyword}, '%')
			ORDER BY    p.post_date desc;
		]]>
	</select>

</mapper>